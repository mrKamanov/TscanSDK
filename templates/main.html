<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å–∫–∞–Ω–µ—Ä–∞ —Ç–µ—Å—Ç–æ–≤">
    <meta name="theme-color" content="#2E3440">
    <title>–°–∫–∞–Ω–µ—Ä —Ç–µ—Å—Ç–æ–≤ - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/global.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/qr.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            margin: 0;
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 48px 24px;
        }

        .decorative-elements {
            flex: 1;
            background-color: var(--background-color);
        }

        .menu-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer {
            width: fit-content;
            padding: 16px 32px;
            display: flex;
            gap: 32px;
            align-items: center;
            margin: 20px auto;
            border-radius: var(--border-radius);
        }

        .school-name {
            font-size: 1.1em;
            color: var(--text-color);
        }

        .contact-info {
            display: flex;
            gap: 24px;
            align-items: center;
        }

        .email-link, .github-link {
            color: var(--text-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .email-link:hover, .github-link:hover {
            color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .github-link i {
            font-size: 24px;
        }

        @media screen and (max-width: 768px) {
            .main-content {
                padding: 24px 16px;
            }

            .footer {
                flex-direction: column;
                gap: 16px;
                text-align: center;
                padding: 16px;
                width: fit-content;
                margin: 16px auto;
            }

            .contact-info {
                flex-direction: column;
                gap: 16px;
            }

            .email-link {
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <main class="main-content">
            <div class="decorative-elements">
                <div class="decorative-letters">
                    <span class="check">‚úì</span>
                    <span class="circle-letter" data-letter="–ê"></span>
                    <span class="circle-letter" data-letter="–ë"></span>
                    <span class="circle-letter" data-letter="–í"></span>
                    <span class="circle-letter" data-letter="–ì"></span>
                    <span class="circle-letter" data-letter="–î"></span>
                    <span class="cross">‚úï</span>
                </div>
            </div>
            
            <!-- –í–µ—Ä—Ö–Ω—è—è –ø—Ä–∞–≤–∞—è –≥—Ä—É–ø–ø–∞ -->
            <div class="decorative-letters">
                <span class="check">‚úì</span>
                <span class="circle-letter" data-letter="1"></span>
                <span class="circle-letter" data-letter="2"></span>
                <span class="circle-letter" data-letter="3"></span>
                <span class="cross">‚úï</span>
            </div>

            <!-- –í–µ—Ä—Ö–Ω—è—è –ª–µ–≤–∞—è –≥—Ä—É–ø–ø–∞ -->
            <div class="decorative-icons top-left">
                <span class="icon">üìù</span>
                <span class="icon">‚úé</span>
                <span class="icon">üìã</span>
            </div>

            <!-- –ù–∏–∂–Ω—è—è –ø—Ä–∞–≤–∞—è –≥—Ä—É–ø–ø–∞ -->
            <div class="decorative-icons bottom-right">
                <span class="icon">üìö</span>
                <span class="icon">üéì</span>
                <span class="icon">‚úèÔ∏è</span>
            </div>

            <div class="menu-container">
                <h1 class="main-title">
                    <i class="fas fa-graduation-cap"></i>
                    –°–∫–∞–Ω–µ—Ä —Ç–µ—Å—Ç–æ–≤
                </h1>
                <div class="cards-grid">
                    <a href="/scan" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <h2>–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
                        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ –∫–∞–º–µ—Ä—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>

                    <a href="/batch" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-images"></i>
                        </div>
                        <h2>–ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</h2>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>

                    <a href="/reports" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <h2>–û—Ç—á–µ—Ç—ã</h2>
                        <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>

                    <a href="/instructions" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h2>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
                        <p>–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>

                    <a href="/constructor" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-edit"></i>
                        </div>
                        <h2>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–ª–∞–Ω–∫–æ–≤</h2>
                        <p>–°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–ª–∞–Ω–∫–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>

                    <a href="/multiple" class="menu-card">
                        <div class="card-icon">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <h2>–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</h2>
                        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏</p>
                        <div class="card-footer">
                            <span class="card-action">–û—Ç–∫—Ä—ã—Ç—å <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>
                </div>

                <div style="margin-top: 48px; display: flex; justify-content: center;">
                    <div class="menu-card" id="qr-card" style="max-width: 300px; padding: 16px 24px; display: flex; align-items: center; gap: 16px; cursor: pointer; background: rgba(136, 192, 208, 0.1); border: 1px solid rgba(136, 192, 208, 0.2); transition: all 0.3s ease;">
                        <div class="card-icon" style="margin: 0; padding: 12px; background: transparent;">
                            <i class="fas fa-qrcode" style="color: var(--secondary-color);"></i>
                        </div>
                        <div style="flex: 1;">
                            <h2 style="margin: 0 0 4px 0; font-size: 1.1em; color: var(--text-color);">–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</h2>
                            <p style="margin: 0; font-size: 0.9em; opacity: 0.7; color: var(--text-color);">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å QR-–∫–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color); opacity: 0.7; font-size: 1.2em;"></i>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="school-name">–ú–ë–û–£ –°–û–® ‚Ññ14</div>
            <div class="contact-info">
                <a href="mailto:mr.kamanov@yandex.ru" class="email-link">
                    <i class="fas fa-envelope"></i>
                    mr.kamanov@yandex.ru
                </a>
                <a href="https://t.me/+3LrwyvOCbQMwMDIy" class="github-link" target="_blank">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="https://github.com/mrKamanov/TscanSDK" class="github-link" target="_blank">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å QR-–∫–æ–¥–æ–º -->
    <div class="qr-modal" id="qr-modal">
        <div class="qr-modal-content">
            <div class="qr-modal-close" id="qr-modal-close">
                <i class="fas fa-times"></i>
            </div>
            <h2 class="qr-modal-title">
                <i class="fas fa-mobile-alt"></i>
                –ú–æ–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø
            </h2>
            <p class="qr-modal-text">
                –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –∫–∞–º–µ—Ä–æ–π –≤–∞—à–µ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Ç–æ–π –∂–µ —Å–µ—Ç–∏ Wi-Fi.
            </p>
            <div class="qr-code-container" id="qr-code"></div>
            <div class="qr-modal-url" id="qr-url"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const qrCard = document.getElementById('qr-card');
            const qrModal = document.getElementById('qr-modal');
            const qrModalClose = document.getElementById('qr-modal-close');
            const qrCodeContainer = document.getElementById('qr-code');
            const qrUrlElement = document.getElementById('qr-url');

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è URL –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
            async function getMobileUrl() {
                try {
                    const response = await fetch('/get_mobile_url');
                    const data = await response.json();
                    return data.url;
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ URL:', error);
                    return window.location.href;
                }
            }

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
            qrCard.addEventListener('click', async function() {
                // –ü–æ–ª—É—á–∞–µ–º URL –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                const mobileUrl = await getMobileUrl();
                
                // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä QR-–∫–æ–¥–∞
                qrCodeContainer.innerHTML = '';
                
                // –°–æ–∑–¥–∞–µ–º QR-–∫–æ–¥
                new QRCode(qrCodeContainer, {
                    text: mobileUrl,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });

                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º URL
                qrUrlElement.textContent = mobileUrl;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                qrModal.style.display = 'flex';
            });

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫—Ä–µ—Å—Ç–∏–∫
            qrModalClose.addEventListener('click', function() {
                qrModal.style.display = 'none';
            });

            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ –æ–±–ª–∞—Å—Ç–∏
            qrModal.addEventListener('click', function(e) {
                if (e.target === qrModal) {
                    qrModal.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html> 